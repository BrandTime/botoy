# 插件化

## 启用

开启插件功能，定义客户端时将参数`use_plugins`设置为`True`即可

插件目录为`plugins`

## 插件要求

1. 文件名需以`bot_`开头

2. 消息接收函数命名

   |                    |          |
   | ------------------ | -------- |
   | receive_group_msg  | 群消息   |
   | receive_friend_msg | 好友消息 |
   | receive_events     | 事件消息 |

!!!tip

    1. 命名错误不会影响程序运行，只是不会被使用。
    2. 参数有且只有一个，和之前用装饰器绑定的接收函数一样

## 刷新插件

假设 `bot = Botoy(123)`

通过以下方法管理插件:

|                    |                                  |
| ------------------ | -------------------------------- |
| bot.load_plugins   | 加载新插件                       |
| bot.reload_plugins | 重载旧插件，加载新插件           |
| bot.reload_plugin  | 根据**已启用插件名**重载指定插件 |
| bot.remove_plugin  | 根据**已启用插件名**停用指定插件 |
| bot.recover_plugin | 根据**已停用插件名**启用指定插件 |

同时有以下属性:

|                     |                        |
| ------------------- | ---------------------- |
| bot.plugins         | **已启用插件名**列表   |
| bot.removed_plugins | **已停用的插件名**列表 |

## 插件帮助信息

框架提供了一个简易的自动整理帮助信息的功能，也可用于菜单

在插件文件的第一行，如果以 # 号开头，则该行 # 号后面的内容就是该插件的帮助信息

调用

|                     |                              |      |
| ------------------- | ---------------------------- | ---- |
| bot.plugin_help     | 所有**已启用插件**的帮助信息 | 属性 |
| bot.get_plugin_help | 获取指定插件的帮助信息       | 方法 |
